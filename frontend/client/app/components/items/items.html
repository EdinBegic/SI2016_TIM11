<h4>Inventurne stavke</h4>

<div class="card-panel teal lighten-5">
    <h5>Unos inventurne stavke</h5>
    <form  ng-submit="$ctrl.registerItem()" name="form" novalidate>
        <div class="row">
            <div class="input-field col s12">
                <input type="text" id="skuNumber" name="skuNumber" placeholder="Inventurni broj" ng-model="$ctrl.items.skuNumber" required>
                <label for="skuNumber">Inventurni broj</label>
                <span class="error" ng-show="form.$submitted && form.skuNumber.$error.required">Inventurni broj je obavezno polje.</span>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <input type="text" id="name" name="name" placeholder="Naziv" ng-model="$ctrl.items.name" ng-pattern="/^[a-z][a-z0-9]{1,15}$/i" required>
                <label for="name">Naziv</label>
                <span class="error" ng-show="form.$submitted && form.name.$error.required">Naziv je obavezno polje.</span>
                <span class="error" ng-show="form.$submitted && form.name.$error.pattern">Naziv mora imati najmanje 2 znaka, od kojih je prvo slovo, a ostali su slova ili brojevi.</span>
            </div>
        </div>
        <div class="row">
           <div class="input-field col s12">
                <input type="text" id="mjerna_jedinica" name="mjerna_jedinica" placeholder="Mjerna jedinica" ng-model="$ctrl.items.unitOfMeasurement" ng-pattern="/^[a-z][a-z0-9]{0,19}$/i" required>
                <label for="mjerna_jedinica">Mjerna jedinica</label>
                <!--<span class="error" ng-show="form.$submitted && form.name.$error.required">Naziv je obavezno polje.</span>  NE ZNAM DA LI JE OVO POLJE OBAVEZNO -->
                <span class="error" ng-show="form.$submitted && form.mjerna_jedinica.$error.pattern">Mjerna jedinica ne smije imati više od 20 znakova, od kojih je prvo slovo, a ostali su slova ili brojevi.</span>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <input type="text" id="unesenoOd" name="unesenoOd" placeholder="Uneseno od" ng-model="$ctrl.items.purchasedBy" ng-pattern="/^[a-z][a-z0-9]$/i" required>
                <label for="unesenoOd">Uneseno od</label>
                <span class="error" ng-show="form.$submitted && form.unesenoOd.$error.required">Obavezno polje.</span>
                 <span class="error" ng-show="form.$submitted && form.unesenoOd.$error.pattern">Polje ne smije pocinjat brojem.</span>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <input type="text" id="odgovornaOsoba" name="odgovornaOsoba" placeholder="Odgovorna osoba" ng-model="$ctrl.items.personResponsible" ng-pattern="/^[a-z][a-z0-9]$/i"  required>
                <label for="odgovornaOsoba">Odgovorna osoba</label>
                <span class="error" ng-show="form.$submitted && form.odgovornaOsoba.$error.required">Obavezno polje.</span>
                <span class="error" ng-show="form.$submitted && form.odgovornaOsoba.$error.pattern">Naziv odgovorne osobe ne smije pocinjat brojem.</span>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <input type="number" step="0.01" min="0" max="9999999999999999.99" class="validate" name="value" placeholder="Vrijednost" ng-model="$ctrl.items.value" required>
                <label for="value">Vrijednost</label>
                <span class="error" ng-show="form.$submitted && form.value.$error.required">Obavezno polje.</span>
                <span class="error" ng-show="form.$submitted && form.value.$error.number">Vrijednost mora biti pozitivan broj sa najviše 16 cifara i 2 decimale.</span>
            </div>
        </div>
        <div class="row">
            <label  class="input-field col s12" for="dateOfPurchase">Datum unosa</label>
             <div class="input-field col s12">
                <input type="date" class="validate" ng-model="$ctrl.items.dateOfPurchas" name="dateOfPurchase" required >
                <span style="color:red" ng-show="forma.dateOfPurchase.$error.required">  *Obavezan podatak.</span>
                <span class="error" ng-show="form.input.$error.date"> Not a valid date!</span>
            </div>



        </div>
        <div class="row">
            <div class="input-field col s12">
                    <select class="browser-default" ng-model="$ctrl.items.categoryID">
                        <option value="" disabled selected>Izaberite kategoriju</option>
                        <option ng-repeat="category in $ctrl.categories" value="{{ category.id }}"> {{ category.name }} </option>
                    </select>
            </div>
        </div>

        <div class="row">
            <div class="input-field col s12">
                    <select class="browser-default" ng-model="$ctrl.items.locationID">
                        <option value="" disabled selected>Izaberite lokaciju</option>
                        <option ng-repeat="location in $ctrl.locations" value="{{ location.id }}"> {{ location.name }} </option>
                    </select>
            </div>
        </div>

            <br>
            <button class="btn waves-effect waves-light right"  data-ng-click="$ctrl.registerItem()" name="action"> Dodaj inventurnu stavku
            </button>
            <br><br>
        </form>
    <br><br>
    </div>
</div>
<br><br>
<div class="row">
    <h5>Lista inventurnih stavki</h5>
    <div class="row">
        <div class="col s2"><h5>Pretraga:</h5></div>
        <div class="col s10">
            <input type="text" class="validate" placeholder="Pojam" ng-model="searchText" ng-change="$ctrl.filter(this.searchText)" ng-model-options="{ debounce:200 }"> </div>
    </div>
    <div class="row">
        <div class="col s12">
            <table class="striped">
                <tr>
                    <th>Naziv</th>
                    <th>Datum unosa</th>
                    <th>Odgovorna osoba</th>
                    <th>Uneseno od</th>
                    <th>Inventurni broj</th>
                    <th>Mjerna jedinica</th>
                    <th>Vrijednost</th>
                    <th>Kategorija</th>
                    <th>Lokacija</th>
                    <th></th>
                </tr>
                <tr ng-repeat="item in $ctrl.items">
                    <td>{{ item.name }}</td>
                    <td>{{ item.dateOfPurchase }}</td>
                    <td>{{ item.personResponsible }}</td>
                    <td>{{ item.purchasedBy }}</td>
                    <td>{{ item.skuNumber }}</td>
                    <td>{{ item.unitOfMeasurement }}</td>
                    <td>{{ item.value }}</td>
                    <td>{{ item.category }}</td>
                    <td>{{ item.location }}</td>
                    <td >
			<a ng-hide="$ctrl.shouldHide(item.dateOfPurchase)"
                           href="#" ng-click="$ctrl.delete(item.id)"><i class="material-icons">delete</i></a>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
